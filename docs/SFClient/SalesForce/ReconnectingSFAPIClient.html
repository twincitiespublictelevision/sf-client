<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="robots" content="index, follow, all" />
    <title>SFClient\SalesForce\ReconnectingSFAPIClient | API</title>

            <link rel="stylesheet" type="text/css" href="../../css/normalize.css">
        <link rel="stylesheet" type="text/css" href="../../css/min.css">
        <link rel="stylesheet" type="text/css" href="../../css/prism.css">
        <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,700,400italic' rel='stylesheet' type='text/css'>
        <script src="../../js/prism.js"></script>
        <meta name="MobileOptimized" content="width">
        <meta name="HandheldFriendly" content="true">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    
    
    </head>

    <body id="class" data-name="class:SFClient_SalesForce_ReconnectingSFAPIClient" data-root-path="../../">
            <nav>
    <div class="container">
      <div class="title">
        <a href="../../index.html">API</a>
      </div>
      <ul>
        <li><a href="../../classes.html">Classes</a></li>
                  <li><a href="../../namespaces.html">Namespaces</a></li>
                <li><a href="../../interfaces.html">Interfaces</a></li>
        <li><a href="../../traits.html">Traits</a></li>
        <li><a href="../../doc-index.html">Index</a></li>
        <li><a href="../../search.html">Search</a></li>
      </ul>
                  <ol class="breadcrumb">
                                  <li><a href="../../SFClient.html">SFClient</a></li>
                    <li><a href="../../SFClient/SalesForce.html">SalesForce</a></li>
  
            <li>ReconnectingSFAPIClient</li>
        </ol>
        </div>
  </nav>

  <div class="container">
    <div class="row">
        <div id="control-panel">
      </div>

        <div id="api-tree"></div>

    </div>
    <div class="row">
          <h1>ReconnectingSFAPIClient</h1>

    <p>    class
    <strong>ReconnectingSFAPIClient</strong>        extends <a href="../../SFClient/SalesForce/SFAPIClient.html"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a>
</p>

            <p>Class ReconnectingSFAPIClient</p>        <p>An extension of the SalesForce API Client that will make
a second authorization attempt if the first run attempt results in a
401 Error.</p>    
    
            <h2>Constants</h2>

            <table class="table">
                    <tr>
                <td><code class="language-php">OBJECT_API =  &#039;sobjects&#039;;</code></td>
                <td>
                    <p><em></em></p>
                    <p></p>
                </td>
            </tr>
                    <tr>
                <td><code class="language-php">RETRY_STATUSES =  [ 400, 404, 415, 500 ];</code></td>
                <td>
                    <p><em></em></p>
                    <p></p>
                </td>
            </tr>
            </table>

    
            <h2>Properties</h2>

            <table class="table">
                    <tr>
                <td id="property__client">
                    <code class="language-php">                    protected                                        <abbr title="GuzzleHttp\Client">Client</abbr></code>
                </td>
                <td><code class="language-php">$_client</code></td>
                <td></td>
                <td><small>from&nbsp;<a href="../../SFClient/SalesForce/SFAPIClient.html#property__client"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></small></td>
            </tr>
                    <tr>
                <td id="property__token">
                    <code class="language-php">                    protected                                        string</code>
                </td>
                <td><code class="language-php">$_token</code></td>
                <td></td>
                <td><small>from&nbsp;<a href="../../SFClient/SalesForce/SFAPIClient.html#property__token"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></small></td>
            </tr>
            </table>

    
            <h2>Methods</h2>

            <table class="table">
            <tr>
            <td>
                <code class="language-php">
                                                            protected                                    </code>
            </td>
            <td class="text-right"><code class="language-php"></code></td>
            <td>
                <code class="language-php"><a href="#method___construct">__construct</a>(<abbr title="GuzzleHttp\Client">Client</abbr> $client, string $token, <a href="../../SFClient/Auth/Authentication.html"><abbr title="SFClient\Auth\Authentication">Authentication</abbr></a> $auth)</code>
            </td>
            <td>
                                    ReconnectingSFClient constructor.            </td>
            <td></td>
        </tr>
            <tr>
            <td>
                <code class="language-php">
                                                            public                    static                </code>
            </td>
            <td class="text-right"><code class="language-php"><a href="../../SFClient/SalesForce/SFAPIClient.html"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></code></td>
            <td>
                <code class="language-php"><a href="#method_connect">connect</a>(<a href="../../SFClient/Endpoint/Endpoint.html"><abbr title="SFClient\Endpoint\Endpoint">Endpoint</abbr></a> $endpoint, <a href="../../SFClient/Auth/Authentication.html"><abbr title="SFClient\Auth\Authentication">Authentication</abbr></a> $auth)</code>
            </td>
            <td>
                                    Constructs a new SalesForce API client with a given SalesForce API endpoint
and authentication mechanism.            </td>
            <td><small>from&nbsp;<a href="../../SFClient/SalesForce/SFAPIClient.html#method_connect"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></small></td>
        </tr>
            <tr>
            <td>
                <code class="language-php">
                                                            public                    static                </code>
            </td>
            <td class="text-right"><code class="language-php"><a href="../../SFClient/SalesForce/SFAPIClient.html"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></code></td>
            <td>
                <code class="language-php"><a href="#method_connectWith">connectWith</a>(<abbr title="GuzzleHttp\Client">Client</abbr> $client, <a href="../../SFClient/Auth/Authentication.html"><abbr title="SFClient\Auth\Authentication">Authentication</abbr></a> $auth)</code>
            </td>
            <td>
                                    Constructs a new SalesForce API client with a custom Http client and the
given authentication mechanism.  Extended from SFAPIClient::connectWith() to
include $auth in the construction of the ReconnectingSFAPIClient.            </td>
            <td></td>
        </tr>
            <tr>
            <td>
                <code class="language-php">
                                                            public                                    </code>
            </td>
            <td class="text-right"><code class="language-php"><a href="../../SFClient/SalesForce/ScopedSFAPIClient.html"><abbr title="SFClient\SalesForce\ScopedSFAPIClient">ScopedSFAPIClient</abbr></a></code></td>
            <td>
                <code class="language-php"><a href="#method_scope">scope</a>(string $objectType)</code>
            </td>
            <td>
                                    Constructs a new SalesForce API client that is scoped to a specific object
type.            </td>
            <td><small>from&nbsp;<a href="../../SFClient/SalesForce/SFAPIClient.html#method_scope"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></small></td>
        </tr>
            <tr>
            <td>
                <code class="language-php">
                                                            public                                    </code>
            </td>
            <td class="text-right"><code class="language-php"><a href="../../SFClient/Result/SFCreationResult.html"><abbr title="SFClient\Result\SFCreationResult">SFCreationResult</abbr></a></code></td>
            <td>
                <code class="language-php"><a href="#method_create">create</a>(string $objectType, array $data)</code>
            </td>
            <td>
                                    Performs a create operation for a given type.            </td>
            <td><small>from&nbsp;<a href="../../SFClient/SalesForce/SFAPIClient.html#method_create"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></small></td>
        </tr>
            <tr>
            <td>
                <code class="language-php">
                                                            public                                    </code>
            </td>
            <td class="text-right"><code class="language-php"><a href="../../SFClient/Result/SFObjectResult.html"><abbr title="SFClient\Result\SFObjectResult">SFObjectResult</abbr></a></code></td>
            <td>
                <code class="language-php"><a href="#method_get">get</a>(string $objectType, string $id, array $fields = [], $timeout = 10)</code>
            </td>
            <td>
                                    Fetches a single object of a given type.            </td>
            <td><small>from&nbsp;<a href="../../SFClient/SalesForce/SFAPIClient.html#method_get"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></small></td>
        </tr>
            <tr>
            <td>
                <code class="language-php">
                                                            public                                    </code>
            </td>
            <td class="text-right"><code class="language-php"><a href="../../SFClient/Result/BoolResult.html"><abbr title="SFClient\Result\BoolResult">BoolResult</abbr></a></code></td>
            <td>
                <code class="language-php"><a href="#method_patch">patch</a>(string $objectType, string $id, array $data)</code>
            </td>
            <td>
                                    Updates a single object of a given type with the given id.            </td>
            <td><small>from&nbsp;<a href="../../SFClient/SalesForce/SFAPIClient.html#method_patch"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></small></td>
        </tr>
            <tr>
            <td>
                <code class="language-php">
                                                            public                                    </code>
            </td>
            <td class="text-right"><code class="language-php"><a href="../../SFClient/Result/BoolResult.html"><abbr title="SFClient\Result\BoolResult">BoolResult</abbr></a></code></td>
            <td>
                <code class="language-php"><a href="#method_delete">delete</a>(string $objectType, string $id)</code>
            </td>
            <td>
                                    Deletes a single object of a given type with the given id.            </td>
            <td><small>from&nbsp;<a href="../../SFClient/SalesForce/SFAPIClient.html#method_delete"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></small></td>
        </tr>
            <tr>
            <td>
                <code class="language-php">
                                                            public                                    </code>
            </td>
            <td class="text-right"><code class="language-php"><a href="../../SFClient/Result/SFRecordsResult.html"><abbr title="SFClient\Result\SFRecordsResult">SFRecordsResult</abbr></a></code></td>
            <td>
                <code class="language-php"><a href="#method_query">query</a>(string $query)</code>
            </td>
            <td>
                                    Performs an arbitrary query against the SalesForce query endpoint and
returns the results.            </td>
            <td><small>from&nbsp;<a href="../../SFClient/SalesForce/SFAPIClient.html#method_query"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></small></td>
        </tr>
            <tr>
            <td>
                <code class="language-php">
                                                            public                                    </code>
            </td>
            <td class="text-right"><code class="language-php"><a href="../../SFClient/Result/SFRecordsResult.html"><abbr title="SFClient\Result\SFRecordsResult">SFRecordsResult</abbr></a></code></td>
            <td>
                <code class="language-php"><a href="#method_fullQuery">fullQuery</a>(string $query)</code>
            </td>
            <td>
                                    Performs an multiple queries against the SalesForce query endpoint to
capture all results for a given query.            </td>
            <td><small>from&nbsp;<a href="../../SFClient/SalesForce/SFAPIClient.html#method_fullQuery"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></small></td>
        </tr>
            <tr>
            <td>
                <code class="language-php">
                                                            public                                    </code>
            </td>
            <td class="text-right"><code class="language-php">string</code></td>
            <td>
                <code class="language-php"><a href="#method_o">o</a>(string $objectType, string $id = &#039;&#039;)</code>
            </td>
            <td>
                                    Helper function for constructing a SalesForce Object REST uri.            </td>
            <td><small>from&nbsp;<a href="../../SFClient/SalesForce/SFAPIClient.html#method_o"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></small></td>
        </tr>
            <tr>
            <td>
                <code class="language-php">
                                                            public                                    </code>
            </td>
            <td class="text-right"><code class="language-php"><abbr title="GuzzleHttp\Psr7\Request">Request</abbr></code></td>
            <td>
                <code class="language-php"><a href="#method_authenticatedRequest">authenticatedRequest</a>(<abbr title="GuzzleHttp\Psr7\Request">Request</abbr> $request)</code>
            </td>
            <td>
                                    Given an arbitrary request, returns a new request with the client stored
authentication information attached.            </td>
            <td><small>from&nbsp;<a href="../../SFClient/SalesForce/SFAPIClient.html#method_authenticatedRequest"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></small></td>
        </tr>
            <tr>
            <td>
                <code class="language-php">
                                                            public                                    </code>
            </td>
            <td class="text-right"><code class="language-php"><a href="../../SFClient/Result/Result.html"><abbr title="SFClient\Result\Result">Result</abbr></a></code></td>
            <td>
                <code class="language-php"><a href="#method_run">run</a>(<abbr title="GuzzleHttp\Psr7\Request">Request</abbr> $request, boolean $retry = true)</code>
            </td>
            <td>
                                    Executes an arbitrary request against the SalesForce API.  Extended from
SFAPICLient to attempt reauthorization if the request fails due to a 401 error            </td>
            <td></td>
        </tr>
            <tr>
            <td>
                <code class="language-php">
                                                            protected                                    </code>
            </td>
            <td class="text-right"><code class="language-php">mixed</code></td>
            <td>
                <code class="language-php"><a href="#method__send">_send</a>(<abbr title="GuzzleHttp\Psr7\Request">Request</abbr> $request)</code>
            </td>
            <td>
                                    No description
                            </td>
            <td><small>from&nbsp;<a href="../../SFClient/SalesForce/SFAPIClient.html#method__send"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></small></td>
        </tr>
        </table>


        <h2>Details</h2>

            <div id="method-details">
                        <div>
        <div class="float-right">
                            at line <a href="#source.30">30</a>
                    </div>
        <div>
            <h3 id="method___construct"><code class="language-php">__construct()</code></h3>
            <code class="language-php">protected __construct(<abbr title="GuzzleHttp\Client">Client</abbr> $client, string $token, <a href="../../SFClient/Auth/Authentication.html"><abbr title="SFClient\Auth\Authentication">Authentication</abbr></a> $auth)</code>
        </div>
    </div>

    <div class="details">
                    <div>
                                    <p>ReconnectingSFClient constructor.</p>                                </div>
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php"><abbr title="GuzzleHttp\Client">Client</abbr></code></td>
                <td><code class="language-php">$client</code></td>
                <td></td>
            </tr>
                    <tr>
                <td><code class="language-php">string</code></td>
                <td><code class="language-php">$token</code></td>
                <td></td>
            </tr>
                    <tr>
                <td><code class="language-php"><a href="../../SFClient/Auth/Authentication.html"><abbr title="SFClient\Auth\Authentication">Authentication</abbr></a></code></td>
                <td><code class="language-php">$auth</code></td>
                <td></td>
            </tr>
            </table>

        
        
        
            </div>

                        <div>
        <div class="float-right">
                            in <a href="../../SFClient/SalesForce/SFAPIClient.html#method_connect"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a> at line 75
                    </div>
        <div>
            <h3 id="method_connect"><code class="language-php">connect()</code></h3>
            <code class="language-php">public static <a href="../../SFClient/SalesForce/SFAPIClient.html"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a>&nbsp;connect(<a href="../../SFClient/Endpoint/Endpoint.html"><abbr title="SFClient\Endpoint\Endpoint">Endpoint</abbr></a> $endpoint, <a href="../../SFClient/Auth/Authentication.html"><abbr title="SFClient\Auth\Authentication">Authentication</abbr></a> $auth)</code>
        </div>
    </div>

    <div class="details">
                    <div>
                                    <p>Constructs a new SalesForce API client with a given SalesForce API endpoint
and authentication mechanism.</p>                                </div>
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php"><a href="../../SFClient/Endpoint/Endpoint.html"><abbr title="SFClient\Endpoint\Endpoint">Endpoint</abbr></a></code></td>
                <td><code class="language-php">$endpoint</code></td>
                <td>SalesForce endpoint to make calls against</td>
            </tr>
                    <tr>
                <td><code class="language-php"><a href="../../SFClient/Auth/Authentication.html"><abbr title="SFClient\Auth\Authentication">Authentication</abbr></a></code></td>
                <td><code class="language-php">$auth</code></td>
                <td>SalesForce authentication mechanism</td>
            </tr>
            </table>

        
                    <h4>Return Value</h4>

                <table class="table">
        <tr>
            <td><code class="language-php"><a href="../../SFClient/SalesForce/SFAPIClient.html"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></code></td>
            <td></td>
        </tr>
    </table>

        
                    <h4>Exceptions</h4>

                <table class="table">
                    <tr>
                <td><a href="../../SFClient/Exceptions/FailedToAuthenticate.html"><abbr title="SFClient\Exceptions\FailedToAuthenticate">FailedToAuthenticate</abbr></a></td>
                <td></td>
            </tr>
                    <tr>
                <td><abbr title="GuzzleHttp\Exception\GuzzleException">GuzzleException</abbr></td>
                <td></td>
            </tr>
            </table>

        
            </div>

                        <div>
        <div class="float-right">
                            at line <a href="#source.46">46</a>
                    </div>
        <div>
            <h3 id="method_connectWith"><code class="language-php">connectWith()</code></h3>
            <code class="language-php">public static <a href="../../SFClient/SalesForce/SFAPIClient.html"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a>&nbsp;connectWith(<abbr title="GuzzleHttp\Client">Client</abbr> $client, <a href="../../SFClient/Auth/Authentication.html"><abbr title="SFClient\Auth\Authentication">Authentication</abbr></a> $auth)</code>
        </div>
    </div>

    <div class="details">
                    <div>
                                    <p>Constructs a new SalesForce API client with a custom Http client and the
given authentication mechanism.  Extended from SFAPIClient::connectWith() to
include $auth in the construction of the ReconnectingSFAPIClient.</p>                                </div>
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php"><abbr title="GuzzleHttp\Client">Client</abbr></code></td>
                <td><code class="language-php">$client</code></td>
                <td>Http client that will be used by the SFAPIClient to communicate with the SalesForce API</td>
            </tr>
                    <tr>
                <td><code class="language-php"><a href="../../SFClient/Auth/Authentication.html"><abbr title="SFClient\Auth\Authentication">Authentication</abbr></a></code></td>
                <td><code class="language-php">$auth</code></td>
                <td>SalesForce authentication mechanism</td>
            </tr>
            </table>

        
                    <h4>Return Value</h4>

                <table class="table">
        <tr>
            <td><code class="language-php"><a href="../../SFClient/SalesForce/SFAPIClient.html"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a></code></td>
            <td></td>
        </tr>
    </table>

        
                    <h4>Exceptions</h4>

                <table class="table">
                    <tr>
                <td><a href="../../SFClient/Exceptions/FailedToAuthenticate.html"><abbr title="SFClient\Exceptions\FailedToAuthenticate">FailedToAuthenticate</abbr></a></td>
                <td></td>
            </tr>
                    <tr>
                <td><abbr title="GuzzleHttp\Exception\GuzzleException">GuzzleException</abbr></td>
                <td></td>
            </tr>
            </table>

        
            </div>

                        <div>
        <div class="float-right">
                            in <a href="../../SFClient/SalesForce/SFAPIClient.html#method_scope"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a> at line 140
                    </div>
        <div>
            <h3 id="method_scope"><code class="language-php">scope()</code></h3>
            <code class="language-php">public <a href="../../SFClient/SalesForce/ScopedSFAPIClient.html"><abbr title="SFClient\SalesForce\ScopedSFAPIClient">ScopedSFAPIClient</abbr></a>&nbsp;scope(string $objectType)</code>
        </div>
    </div>

    <div class="details">
                    <div>
                                    <p>Constructs a new SalesForce API client that is scoped to a specific object
type.</p>                    <p>Note that this re-uses the Http client of the SalesForce API client
that was used to create the scoped client. Object types passed to the
method are not validated in any way.</p>

<pre><code class="php">$contacts = $client-&gt;scope('Contact');
</code></pre>
</p>            </div>
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php">string</code></td>
                <td><code class="language-php">$objectType</code></td>
                <td>SalesForce object type to create a client for</td>
            </tr>
            </table>

        
                    <h4>Return Value</h4>

                <table class="table">
        <tr>
            <td><code class="language-php"><a href="../../SFClient/SalesForce/ScopedSFAPIClient.html"><abbr title="SFClient\SalesForce\ScopedSFAPIClient">ScopedSFAPIClient</abbr></a></code></td>
            <td></td>
        </tr>
    </table>

        
        
            </div>

                        <div>
        <div class="float-right">
                            in <a href="../../SFClient/SalesForce/SFAPIClient.html#method_create"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a> at line 151
                    </div>
        <div>
            <h3 id="method_create"><code class="language-php">create()</code></h3>
            <code class="language-php">public <a href="../../SFClient/Result/SFCreationResult.html"><abbr title="SFClient\Result\SFCreationResult">SFCreationResult</abbr></a>&nbsp;create(string $objectType, array $data)</code>
        </div>
    </div>

    <div class="details">
                    <div>
                                    <p>Performs a create operation for a given type.</p>                                </div>
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php">string</code></td>
                <td><code class="language-php">$objectType</code></td>
                <td>SalesForce object type to create</td>
            </tr>
                    <tr>
                <td><code class="language-php">array</code></td>
                <td><code class="language-php">$data</code></td>
                <td>Field data to create the object with</td>
            </tr>
            </table>

        
                    <h4>Return Value</h4>

                <table class="table">
        <tr>
            <td><code class="language-php"><a href="../../SFClient/Result/SFCreationResult.html"><abbr title="SFClient\Result\SFCreationResult">SFCreationResult</abbr></a></code></td>
            <td></td>
        </tr>
    </table>

        
        
            </div>

                        <div>
        <div class="float-right">
                            in <a href="../../SFClient/SalesForce/SFAPIClient.html#method_get"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a> at line 186
                    </div>
        <div>
            <h3 id="method_get"><code class="language-php">get()</code></h3>
            <code class="language-php">public <a href="../../SFClient/Result/SFObjectResult.html"><abbr title="SFClient\Result\SFObjectResult">SFObjectResult</abbr></a>&nbsp;get(string $objectType, string $id, array $fields = [], $timeout = 10)</code>
        </div>
    </div>

    <div class="details">
                    <div>
                                    <p>Fetches a single object of a given type.</p>                    <p>The optional <code>$fields</code> argument may be used to restrict the fields that
are returned. By default all fields are returned.</p>            </div>
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php">string</code></td>
                <td><code class="language-php">$objectType</code></td>
                <td></td>
            </tr>
                    <tr>
                <td><code class="language-php">string</code></td>
                <td><code class="language-php">$id</code></td>
                <td></td>
            </tr>
                    <tr>
                <td><code class="language-php">array</code></td>
                <td><code class="language-php">$fields</code></td>
                <td></td>
            </tr>
                    <tr>
                <td></td>
                <td><code class="language-php">$timeout</code></td>
                <td></td>
            </tr>
            </table>

        
                    <h4>Return Value</h4>

                <table class="table">
        <tr>
            <td><code class="language-php"><a href="../../SFClient/Result/SFObjectResult.html"><abbr title="SFClient\Result\SFObjectResult">SFObjectResult</abbr></a></code></td>
            <td></td>
        </tr>
    </table>

        
                    <h4>Exceptions</h4>

                <table class="table">
                    <tr>
                <td><a target="_blank" href="http://php.net/Exception"><abbr title="Exception">Exception</abbr></a></td>
                <td></td>
            </tr>
            </table>

        
            </div>

                        <div>
        <div class="float-right">
                            in <a href="../../SFClient/SalesForce/SFAPIClient.html#method_patch"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a> at line 223
                    </div>
        <div>
            <h3 id="method_patch"><code class="language-php">patch()</code></h3>
            <code class="language-php">public <a href="../../SFClient/Result/BoolResult.html"><abbr title="SFClient\Result\BoolResult">BoolResult</abbr></a>&nbsp;patch(string $objectType, string $id, array $data)</code>
        </div>
    </div>

    <div class="details">
                    <div>
                                    <p>Updates a single object of a given type with the given id.</p>                                </div>
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php">string</code></td>
                <td><code class="language-php">$objectType</code></td>
                <td>SalesForce object type to update</td>
            </tr>
                    <tr>
                <td><code class="language-php">string</code></td>
                <td><code class="language-php">$id</code></td>
                <td>SalesForce id type to update</td>
            </tr>
                    <tr>
                <td><code class="language-php">array</code></td>
                <td><code class="language-php">$data</code></td>
                <td>Field data to update the object with</td>
            </tr>
            </table>

        
                    <h4>Return Value</h4>

                <table class="table">
        <tr>
            <td><code class="language-php"><a href="../../SFClient/Result/BoolResult.html"><abbr title="SFClient\Result\BoolResult">BoolResult</abbr></a></code></td>
            <td></td>
        </tr>
    </table>

        
        
            </div>

                        <div>
        <div class="float-right">
                            in <a href="../../SFClient/SalesForce/SFAPIClient.html#method_delete"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a> at line 251
                    </div>
        <div>
            <h3 id="method_delete"><code class="language-php">delete()</code></h3>
            <code class="language-php">public <a href="../../SFClient/Result/BoolResult.html"><abbr title="SFClient\Result\BoolResult">BoolResult</abbr></a>&nbsp;delete(string $objectType, string $id)</code>
        </div>
    </div>

    <div class="details">
                    <div>
                                    <p>Deletes a single object of a given type with the given id.</p>                                </div>
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php">string</code></td>
                <td><code class="language-php">$objectType</code></td>
                <td>SalesForce object type to delete</td>
            </tr>
                    <tr>
                <td><code class="language-php">string</code></td>
                <td><code class="language-php">$id</code></td>
                <td>SalesForce id type to delete</td>
            </tr>
            </table>

        
                    <h4>Return Value</h4>

                <table class="table">
        <tr>
            <td><code class="language-php"><a href="../../SFClient/Result/BoolResult.html"><abbr title="SFClient\Result\BoolResult">BoolResult</abbr></a></code></td>
            <td></td>
        </tr>
    </table>

        
        
            </div>

                        <div>
        <div class="float-right">
                            in <a href="../../SFClient/SalesForce/SFAPIClient.html#method_query"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a> at line 285
                    </div>
        <div>
            <h3 id="method_query"><code class="language-php">query()</code></h3>
            <code class="language-php">public <a href="../../SFClient/Result/SFRecordsResult.html"><abbr title="SFClient\Result\SFRecordsResult">SFRecordsResult</abbr></a>&nbsp;query(string $query)</code>
        </div>
    </div>

    <div class="details">
                    <div>
                                    <p>Performs an arbitrary query against the SalesForce query endpoint and
returns the results.</p>                    <p>The results returned may not represent all of the objects in SalesForce
that match the given query. Records up to the limit set by SalesForce are
returned.</p>

<p>This method runs the provided query as-is and does not perform validation
or sanitizion. Consumers of the client should handle these operations prior
to passing the query to the client.</p>            </div>
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php">string</code></td>
                <td><code class="language-php">$query</code></td>
                <td>A SOQL query to run</td>
            </tr>
            </table>

        
                    <h4>Return Value</h4>

                <table class="table">
        <tr>
            <td><code class="language-php"><a href="../../SFClient/Result/SFRecordsResult.html"><abbr title="SFClient\Result\SFRecordsResult">SFRecordsResult</abbr></a></code></td>
            <td></td>
        </tr>
    </table>

        
        
            </div>

                        <div>
        <div class="float-right">
                            in <a href="../../SFClient/SalesForce/SFAPIClient.html#method_fullQuery"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a> at line 318
                    </div>
        <div>
            <h3 id="method_fullQuery"><code class="language-php">fullQuery()</code></h3>
            <code class="language-php">public <a href="../../SFClient/Result/SFRecordsResult.html"><abbr title="SFClient\Result\SFRecordsResult">SFRecordsResult</abbr></a>&nbsp;fullQuery(string $query)</code>
        </div>
    </div>

    <div class="details">
                    <div>
                                    <p>Performs an multiple queries against the SalesForce query endpoint to
capture all results for a given query.</p>                    <p>This method utilizies the built in SalesForce query response pagination and
should reflect the behavior of following the next page urls.</p>

<p>If any of the requests fail, the entire query attempt will fail and will
return the erro of the failure.</p>

<p>This method runs the provided query as-is and does not perform validation
or sanitizion. Consumers of the client should handle these operations prior
to passing the query to the client.</p>            </div>
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php">string</code></td>
                <td><code class="language-php">$query</code></td>
                <td>A SOQL query to run</td>
            </tr>
            </table>

        
                    <h4>Return Value</h4>

                <table class="table">
        <tr>
            <td><code class="language-php"><a href="../../SFClient/Result/SFRecordsResult.html"><abbr title="SFClient\Result\SFRecordsResult">SFRecordsResult</abbr></a></code></td>
            <td></td>
        </tr>
    </table>

        
        
            </div>

                        <div>
        <div class="float-right">
                            in <a href="../../SFClient/SalesForce/SFAPIClient.html#method_o"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a> at line 359
                    </div>
        <div>
            <h3 id="method_o"><code class="language-php">o()</code></h3>
            <code class="language-php">public string&nbsp;o(string $objectType, string $id = &#039;&#039;)</code>
        </div>
    </div>

    <div class="details">
                    <div>
                                    <p>Helper function for constructing a SalesForce Object REST uri.</p>                                </div>
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php">string</code></td>
                <td><code class="language-php">$objectType</code></td>
                <td></td>
            </tr>
                    <tr>
                <td><code class="language-php">string</code></td>
                <td><code class="language-php">$id</code></td>
                <td></td>
            </tr>
            </table>

        
                    <h4>Return Value</h4>

                <table class="table">
        <tr>
            <td><code class="language-php">string</code></td>
            <td></td>
        </tr>
    </table>

        
        
            </div>

                        <div>
        <div class="float-right">
                            in <a href="../../SFClient/SalesForce/SFAPIClient.html#method_authenticatedRequest"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a> at line 371
                    </div>
        <div>
            <h3 id="method_authenticatedRequest"><code class="language-php">authenticatedRequest()</code></h3>
            <code class="language-php">public <abbr title="GuzzleHttp\Psr7\Request">Request</abbr>&nbsp;authenticatedRequest(<abbr title="GuzzleHttp\Psr7\Request">Request</abbr> $request)</code>
        </div>
    </div>

    <div class="details">
                    <div>
                                    <p>Given an arbitrary request, returns a new request with the client stored
authentication information attached.</p>                                </div>
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php"><abbr title="GuzzleHttp\Psr7\Request">Request</abbr></code></td>
                <td><code class="language-php">$request</code></td>
                <td></td>
            </tr>
            </table>

        
                    <h4>Return Value</h4>

                <table class="table">
        <tr>
            <td><code class="language-php"><abbr title="GuzzleHttp\Psr7\Request">Request</abbr></code></td>
            <td></td>
        </tr>
    </table>

        
        
            </div>

                        <div>
        <div class="float-right">
                            at line <a href="#source.71">71</a>
                    </div>
        <div>
            <h3 id="method_run"><code class="language-php">run()</code></h3>
            <code class="language-php">public <a href="../../SFClient/Result/Result.html"><abbr title="SFClient\Result\Result">Result</abbr></a>&nbsp;run(<abbr title="GuzzleHttp\Psr7\Request">Request</abbr> $request, boolean $retry = true)</code>
        </div>
    </div>

    <div class="details">
                    <div>
                                    <p>Executes an arbitrary request against the SalesForce API.  Extended from
SFAPICLient to attempt reauthorization if the request fails due to a 401 error</p>                                </div>
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php"><abbr title="GuzzleHttp\Psr7\Request">Request</abbr></code></td>
                <td><code class="language-php">$request</code></td>
                <td></td>
            </tr>
                    <tr>
                <td><code class="language-php">boolean</code></td>
                <td><code class="language-php">$retry</code></td>
                <td></td>
            </tr>
            </table>

        
                    <h4>Return Value</h4>

                <table class="table">
        <tr>
            <td><code class="language-php"><a href="../../SFClient/Result/Result.html"><abbr title="SFClient\Result\Result">Result</abbr></a></code></td>
            <td></td>
        </tr>
    </table>

        
        
            </div>

                        <div>
        <div class="float-right">
                            in <a href="../../SFClient/SalesForce/SFAPIClient.html#method__send"><abbr title="SFClient\SalesForce\SFAPIClient">SFAPIClient</abbr></a> at line 406
                    </div>
        <div>
            <h3 id="method__send"><code class="language-php">_send()</code></h3>
            <code class="language-php">protected mixed&nbsp;_send(<abbr title="GuzzleHttp\Psr7\Request">Request</abbr> $request)</code>
        </div>
    </div>

    <div class="details">
                            <h4>Parameters</h4>

                <table class="table">
                    <tr>
                <td><code class="language-php"><abbr title="GuzzleHttp\Psr7\Request">Request</abbr></code></td>
                <td><code class="language-php">$request</code></td>
                <td></td>
            </tr>
            </table>

        
                    <h4>Return Value</h4>

                <table class="table">
        <tr>
            <td><code class="language-php">mixed</code></td>
            <td></td>
        </tr>
    </table>

        
                    <h4>Exceptions</h4>

                <table class="table">
                    <tr>
                <td><abbr title="GuzzleHttp\Exception\GuzzleException">GuzzleException</abbr></td>
                <td></td>
            </tr>
            </table>

        
            </div>

            </div>

    
    <h2>Source code</h2>
    <pre class="language-php line-numbers" id="source"><code>&lt;?php

namespace SFClient\SalesForce;

use GuzzleHttp\Psr7\Request;
use GuzzleHttp\Client;
use GuzzleHttp\Exception\ClientException;
use SFClient\Result\Result;
use SFClient\Auth\Authentication;
use SFClient\Exceptions\FailedToAuthenticate;

/**
 * Class ReconnectingSFAPIClient
 *
 * An extension of the SalesForce API Client that will make
 * a second authorization attempt if the first run attempt results in a
 * 401 Error.
 *
 * @package SFClient\SalesForce
 */
class ReconnectingSFAPIClient extends SFAPIClient {
  private $_auth;

  /**
   * ReconnectingSFClient constructor.
   * @param Client $client
   * @param string $token
   * @param Authentication $auth
   */
  protected function __construct(Client $client, string $token, Authentication $auth) {
    parent::__construct($client, $token);
    $this-&gt;_auth = $auth;
  }

  /**
   * Constructs a new SalesForce API client with a custom Http client and the
   * given authentication mechanism.  Extended from SFAPIClient::connectWith() to
   * include $auth in the construction of the ReconnectingSFAPIClient.
   *
   * @param Client $client Http client that will be used by the ReconnectingSFAPIClient to communicate with the SalesForce API
   * @param Authentication $auth SalesForce authentication mechanism
   * @return SFAPIClient
   * @throws FailedToAuthenticate
   * @throws \GuzzleHttp\Exception\GuzzleException
   */
  public static function connectWith(Client $client, Authentication $auth): SFAPIClient {
    $token = $auth-&gt;getTokenFromResponse(
      $client-&gt;send($auth-&gt;getTokenRequest())
    );

    if ($token === null) {
      throw new FailedToAuthenticate();
    }

    return new ReconnectingSFAPIClient(
      $client,
      $token,
      $auth
    );
  }

  /**
   * Executes an arbitrary request against the SalesForce API.  Extended from
   * SFAPICLient to attempt reauthorization if the request fails due to a 401 error
   *
   * @param Request $request
   * @param boolean $retry
   * @return Result
   * @internal
   */
  public function run(Request $request, $retry = true): Result {
    try {
      return Result::ok($this-&gt;_send(
        $this-&gt;authenticatedRequest($request)
      ));
    } catch (ClientException $e) {
      if ($e-&gt;getCode() == 401 &amp;&amp; $retry) {
        // Create new auth token and try again
        $token = $this-&gt;_auth-&gt;getTokenFromResponse(
          $this-&gt;_client-&gt;send($this-&gt;_auth-&gt;getTokenRequest())
        );

        if ($token === null) {
          return Result::err(new FailedToAuthenticate());
        }

        $this-&gt;_token = $token;
        return $this-&gt;run($request, false);
      }

      return Result::err($e);
    } catch (\Exception $e) {
      return Result::err($e);
    }
  }
}</code></pre>
    </div>
    <div class="row">
        <div id="footer">
    Generated by <a href="http://sami.sensiolabs.org/">Sami, the API Documentation Generator</a> using <a href="https://github.com/nochso/sami-theme">nochso/sami-theme</a>.
  </div>

    </div>
  </div>
    </body>

</html>
